ğŸŸ¢ 1. Principe du tunnel SSH dans ton cas

Tu as une seule machine, mais deux OS :

Windows hÃ´te (oÃ¹ tourne ton application Node.js)

Linux VirtualBox (oÃ¹ tourne ta base PostgreSQL ou MySQL)

Tu vas crÃ©er un tunnel SSH :

Windows: localhost:5432  â†’  (SSH Tunnel)  â†’ Linux:localhost:5432


RÃ©sultat :

ğŸ‘‰ Node.js se connecte Ã  localhost
ğŸ‘‰ mais Ã§a passe dans un tunnel SSH jusquâ€™Ã  ta VM Linux
ğŸ‘‰ sans exposer la base au rÃ©seau, mÃªme interne

âš ï¸ La base de donnÃ©es reste isolÃ©e dans Linux, ce que tu veux.

ğŸŸ¢ 2. Conditions pour que Ã§a marche
Dans ta VM Linux, tu dois avoir :

SSH installÃ©

Le port SSH (22) ouvert dans VirtualBox

PostgreSQL/MySQL qui Ã©coute en local (listen_addresses = 'localhost')

Dans Windows, tu dois avoir :

OpenSSH client (dÃ©jÃ  intÃ©grÃ© dans Windows 10/11)

Node.js

ğŸŸ¢ 3. Configurer Linux (invitÃ© VirtualBox)
3.1 Installer SSH

Sur Ubuntu :

sudo apt update
sudo apt install openssh-server
sudo systemctl enable ssh
sudo systemctl start ssh


VÃ©rifier :

systemctl status ssh

3.2 Installer PostgreSQL ou MySQL

(Exemple PostgreSQL)

sudo apt install postgresql


VÃ©rifier qu'il Ã©coute uniquement en local (trÃ¨s important) :

sudo nano /etc/postgresql/14/main/postgresql.conf


Assure-toi que :

listen_addresses = 'localhost'


â¡ï¸ Ainsi, la base est complÃ¨tement isolÃ©e dans Linux.

ğŸŸ¢ 4. Configurer VirtualBox pour SSH
Option A (recommandÃ©e) : NAT + Port Forwarding

VirtualBox â†’ ta VM â†’ Configuration

RÃ©seau

Mode dâ€™accÃ¨s : NAT

AvancÃ© â†’ Redirection de ports

Ajouter une rÃ¨gle :

Nom	Protocole	IP HÃ´te	Port HÃ´te	IP invitÃ©	Port invitÃ©
SSH	TCP	127.0.0.1	2222	10.0.2.15	22

(10.0.2.15 = IP NAT standard des VMs VirtualBox)

ğŸŸ¢ 5. CrÃ©ation du tunnel SSH depuis Windows

Dans PowerShell ou CMD, exÃ©cute :

ssh -L 5432:localhost:5432 -p 2222 user@127.0.0.1


Explication :

-L 5432:localhost:5432 â†’ redirige ton port Windows 5432 vers la base Linux

-p 2222 â†’ port SSH NAT Forwarding

user â†’ ton utilisateur Ubuntu

127.0.0.1 â†’ VirtualBox NAT

Il te demande ton mot de passe Linux â†’ entre-le.

â¡ï¸ Le tunnel est maintenant actif.
â¡ï¸ Windows â†’ localhost:5432 â†’ VM Linux (PostgreSQL)

ğŸŸ¢ 6. Configuration dans Node.js (Windows)

Ton code ne change presque pas, tu mets juste :

const client = new Client({
  host: "localhost",
  port: 5432,
  user: "postgres",
  password: "password",
  database: "transport"
});


âš ï¸ MÃªme si la base de donnÃ©es est dans Linux,
tu te connectes comme si elle Ã©tait dans Windows.

ğŸŸ¢ 7. SchÃ©ma pour ton rapport (clair et propre)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Windows (hÃ´te)    â”‚  Tunnel SSH    â”‚ Linux (VirtualBox)        â”‚
â”‚ Node.js App       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ PostgreSQL/MySQL           â”‚
â”‚ localhost:5432    â”‚   cryptÃ©       â”‚ Ã©coute : localhost:5432   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                                     â”‚
          â”‚ Port Forwarding                     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ VirtualBox NAT â”€â”€â”€â”€â”€â”€â”˜


â¡ï¸ La base reste isolÃ©e dans ta VM Linux.
â¡ï¸ Windows nâ€™y accÃ¨de que via SSH.
â¡ï¸ Aucun port DB nâ€™est ouvert.
â¡ï¸ SÃ©curitÃ© maximale.

ğŸŸ¢ 8. Pourquoi cette mÃ©thode est parfaite pour toi

âœ”ï¸ Tu utilises un seul PC, mais tu simules un environnement pro
âœ”ï¸ La base est isolÃ©e dans un OS sÃ©parÃ©
âœ”ï¸ Node.js y accÃ¨de seulement via tunnel SSH cryptÃ©
âœ”ï¸ Aucun besoin dâ€™Internet
âœ”ï¸ Tout est gratuit
âœ”ï¸ Sans exposition rÃ©seau = sÃ©curitÃ© maximale